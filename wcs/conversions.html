<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <title>wcsjs: pixel to sky</title>
    <script src="wcs.js" type="text/javascript"></script>
    
    <script type="text/javascript">
    (function() {
      
      function onDOM() {
        
        // Load a FITS header
        header = {
                    "SIMPLE": "T",
                    "BITPIX": 8,
                    "NAXIS": 2,
                    "NAXIS1": 24,
                    "NAXIS2": 256,
                    "CTYPE1": "RA---TAN",
                    "CRPIX1": 3114.50,
                    "CDELT1": 0.55,
                    "CRVAL1": 22.6771,
                    "CTYPE2": "DEC--TAN",
                    "CRPIX2": 1001.5,
                    "CDELT2": 0.55,
                    "CRVAL2": 0.7,
                    "CD1_1": -0.000152777,
                    "CD2_2": 0.000152777,
                    "EQUINOX": 2000.0,
                    "BPA": 0.0,
                    "RESTFRQ": 1420405750.0,
                  };

        window.onload = function() {
          var w = new wcs();
          w.init(header);
          // var world = w.pix2sky(24, 38);
          console.log(w.pix2sky(40000, 40000));


          console.log(w.sky2pix(0, 0));
          
          // console.log(world[0].toFixed(6) == 270.120344);
          // console.log(world[1].toFixed(6) == -72.676808);
          window.w = w;
        };
      };
      
      window.addEventListener('DOMContentLoaded', onDOM, false);
    })();


    function get_block(x, y){      
      x = Math.floor(x / 256)
      y = Math.floor(y / 256)

      return x, y;
    }


    function get_coord(x, y){
      x = x * 256
      y = y * 256

      console.log(x, y)
    }


    </script>
  </head>
  
  <body>
    <div class="main">
      <h4>wcsjs: pixel to sky</h4>
    </div>
    
  </body>
</html>
