(this.webpackJsonpskyview=this.webpackJsonpskyview||[]).push([[0],{25:function(e,t,c){},27:function(e,t,c){},28:function(e,t,c){},29:function(e,t,c){},30:function(e,t,c){},34:function(e,t,c){},35:function(e,t,c){},36:function(e,t,c){},37:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c.n(n),r=c(9),s=c.n(r),o=c(15),i=(c(25),c(3)),l=c(12),d=c(13),j=function(){function e(){if(Object(l.a)(this,e),e._instance)return e._instance;e._instance=this}return Object(d.a)(e,[{key:"init",value:function(){try{this.A=window.A.aladin("#aladin-lite-div",{target:"11.4498 -0.8528",fov:.14,cooFrame:"ICRSd",fullScreen:!1,showReticle:!0,showZoomControl:!0,showFullscreenControl:!1,showLayersControl:!1,showGotoControl:!0,showShareControl:!1,showSimbadPointerControl:!1,showFrame:!0,reticleColor:"rgb(178, 50, 178)",reticleSize:22});var e=this.A.createImageSurvey("S-PLUS","S-PLUS","https://splus.cloud/HIPS/dr2/color","equatorial",10,{imgFormat:"png"});this.A.setImageSurvey(e)}catch(t){console.log(t)}}},{key:"setMapRef",value:function(e){this.mapRef=e}}]),e}(),u=c(2),b=c(1),O=Object(n.createContext)(),p=Object(n.createContext)(),h={POINTER:{CHANGE_SELECT:1},COMPACT_TOAST:{TOGGLE:4}},f={UPDATE:2,CLOSE:3},v={widget:{pointer:{selected:!1},compactToast:{show:!1,text:""}},objectInfo:{open:!1,ra:0,dec:0}};function x(e,t){switch(t.type){case h.POINTER.CHANGE_SELECT:return e.widget.pointer.selected=t.data,Object(u.a)({},e);case h.COMPACT_TOAST.TOGGLE:return e.widget.compactToast.show=!e.widget.compactToast.show,e.widget.compactToast.text=t.data.text,Object(u.a)({},e);case f.UPDATE:return e.objectInfo=t.data,e.widget.pointer.selected=!1,Object(u.a)({},e);case f.CLOSE:return e.objectInfo.open=!1,Object(u.a)({},e);default:return e}}function m(e){var t=e.children,c=Object(n.useReducer)(x,v),a=Object(i.a)(c,2),r=a[0],s=a[1];return Object(b.jsx)(p.Provider,{value:s,children:Object(b.jsx)(O.Provider,{value:r,children:t})})}function g(){return[Object(n.useContext)(O),Object(n.useContext)(p)]}c(27);var w=function(){var e=g(),t=Object(i.a)(e,2),c=t[0],a=t[1];return Object(n.useEffect)((function(){var e=document.querySelector("canvas.aladin-reticleCanvas");e&&(c.widget.pointer.selected?e.classList.add("pointer-widget-cursor"):e.classList.remove("pointer-widget-cursor"))})),Object(b.jsx)("div",{class:"pointer-widget-container",onClick:function(e){e.stopPropagation(),a({type:h.POINTER.CHANGE_SELECT,data:!c.widget.pointer.selected})},children:Object(b.jsx)("div",{class:"pointer-widget"})})},y=(c(28),c(16)),C=c(4),S=(c(29),["children","className","show","onClose"]);var N=function(e){var t=e.children,c=e.className,n=e.show,a=e.onClose,r=Object(C.a)(e,S);return Object(b.jsxs)("div",Object(u.a)(Object(u.a)({className:"widget-popup ".concat(n?"":"d-none"," ").concat(c||"")},r),{},{children:[Object(b.jsx)("button",{className:"closebtn",onClick:function(e){"function"===typeof a&&a(e)},children:"\xd7"}),Object(b.jsx)("div",{className:"clearfix"}),Object(b.jsx)("div",{children:t})]}))};function k(e){var t=e.label,c=e.min,n=e.max,a=e.value,r=e.step,s=e.onChange,o=e.parser;return Object(b.jsxs)("div",{className:"row mb-1",children:[Object(b.jsx)("label",{className:"col-3 d-flex align-items-center",children:t}),Object(b.jsxs)("div",{className:"col-9 d-flex align-items-center",children:[Object(b.jsx)("input",{type:"range",min:c,max:n,value:a,step:r||1,onChange:s}),Object(b.jsx)("span",{className:"ms-2",children:o(a)})]})]})}var T={brightness:14.5,contrast:1.17,saturate:.93,"hue-rotate":0,invert:0,grayscale:0},E={brightness:function(e){return e},contrast:function(e){return e},saturate:function(e){return e},"hue-rotate":function(e){return"".concat(e,"deg")},invert:function(e){return e},grayscale:function(e){return e}},A=function(e){return"".concat(Number(e).toFixed(0),"\xb0")},I=function(e){return Number(e).toFixed(2)};var P=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)(T),s=Object(i.a)(r,2),o=s[0],l=s[1],d=function(e){a(!c)};Object(n.useEffect)((function(){var e,t,c=new j;c.mapRef&&c.mapRef.current&&(c.mapRef.current.querySelector(".aladin-imageCanvas").style.filter=(e=o,t=E,Object.entries(e).map((function(e){var c=Object(i.a)(e,2),n=c[0],a=c[1];return"".concat(n,"(").concat(t[n](a),")")})).join(" ")))}));var O=function(e){return function(t){o[e]=t.target.value,l(Object(u.a)({},o))}};return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"filter-widget-container",onClick:d,children:Object(b.jsx)("div",{className:"filter-widget",children:Object(b.jsx)(y.b,{style:{width:"100%",height:"100%",padding:"4px"}})})}),Object(b.jsx)(N,{show:c,style:{top:"144px"},onClose:d,children:Object(b.jsxs)("div",{className:"px-1 pt-1",children:[Object(b.jsx)(k,{label:"Brightness",min:0,max:40,step:.01,parser:I,value:o.brightness,onChange:O("brightness")}),Object(b.jsx)(k,{label:"Contrast",min:0,max:5,step:.01,parser:I,value:o.contrast,onChange:O("contrast")}),Object(b.jsx)(k,{label:"Saturate",min:0,max:10,step:.01,parser:I,value:o.saturate,onChange:O("saturate")}),Object(b.jsx)(k,{label:"Hue",min:0,max:360,step:1,parser:A,value:o["hue-rotate"],onChange:O("hue-rotate")}),Object(b.jsx)(k,{label:"Invert",min:0,max:1,step:.01,parser:I,value:o.invert,onChange:O("invert")}),Object(b.jsx)(k,{label:"Gray",min:0,max:1,step:.01,parser:I,value:o.grayscale,onChange:O("grayscale")}),Object(b.jsx)("a",{href:"javascript:void(0)",onClick:function(){l(T)},children:"Reset default"})]})})]})};c(30);var L=new j;var R=function(){var e=g(),t=Object(i.a)(e,2),c=(t[0],t[1]);return Object(b.jsx)("div",{className:"share-widget-container",onClick:function(){var e=L.A.getRaDec(),t=Object(i.a)(e,2),n=t[0],a=t[1],r=function(){var e=window.location.protocol,t=window.location.host,c=window.location.pathname;return"".concat(e,"//").concat(t).concat(c)}(),s="".concat(Number(n).toFixed(5),"%20").concat(Number(a).toFixed(5)),o=L.A.getFov(),l=Object(i.a)(o,1)[0];l=Number(l).toFixed(7);var d="".concat(r,"?target=").concat(s,"&fov=").concat(l);console.log(navigator.clipboard.writeText(d)),c({type:h.COMPACT_TOAST.TOGGLE,data:{text:"Current position url copied to clipboard"}})},children:Object(b.jsx)("div",{className:"share-widget",children:Object(b.jsx)(y.a,{style:{width:"100%",height:"100%",padding:"4px"}})})})},G=c(19),F=c(20);var U=function(){var e=g(),t=Object(i.a)(e,2),c=t[0],n=t[1];return Object(b.jsx)(F.a,{position:"bottom-center",className:"mb-2",style:{zIndex:999},children:Object(b.jsx)(G.a,{show:c.widget.compactToast.show,onClose:function(){n({type:h.COMPACT_TOAST.TOGGLE,data:{text:""}})},delay:3e3,autohide:!0,children:Object(b.jsx)(G.a.Body,{children:Object(b.jsx)("div",{className:"d-flex justify-content-center",children:c.widget.compactToast.text})})})})};var _=function(){var e=g(),t=Object(i.a)(e,2),c=t[0],a=t[1],r=Object(n.useRef)(null),s=Object(o.b)(),l=Object(i.a)(s,2),d=l[0];return l[1],Object(n.useEffect)((function(){var e=new j;e.init(),e.setMapRef(r),d.has("target")&&e.A.gotoObject(d.get("target"),console.log),d.has("fov")&&e.A.setFov(d.get("fov"),console.log)}),[]),Object(b.jsxs)("div",{id:"aladin-lite-div",style:{border:"none"},onClick:function(e){if(e.stopPropagation(),console.log("handleMapClick"),c.widget.pointer.selected){console.log("if");var t=(new j).A.pix2world(e.clientX,e.clientY),n=Object(i.a)(t,2),r=n[0],s=n[1];a({type:f.UPDATE,path:"objectInfo",data:{open:!0,ra:r,dec:s}})}},ref:r,children:[Object(b.jsx)(w,{}),Object(b.jsx)(P,{}),Object(b.jsx)(R,{}),Object(b.jsx)(U,{})]})},M=c(6),D=c.n(M),B=c(8),H=(c(34),function(){function e(){Object(l.a)(this,e),this.coneSpectroUrl="https://skyserver.sdss.org/dr16/SkyServerWS/SpectroQuery/ConeSpectro"}return Object(d.a)(e,[{key:"getSpecId",value:function(){var e=Object(B.a)(D.a.mark((function e(t){var c,n,a,r,s,o;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.ra,n=t.dec,console.log("SloanService",c,n),e.next=4,fetch("".concat(this.coneSpectroUrl,"?radius=0.01667&dec=").concat(n,"&ra=").concat(c,"&limit=1&format=xml&specparams=specObjID&imgparams=none&zWarning=on"));case 4:return a=e.sent,e.next=7,a.text();case 7:return r=e.sent,s=(new DOMParser).parseFromString(r,"application/xml"),o=s.querySelector('Table[name="Table1"] > Row > Item[name="specObjID"]'),e.abrupt("return",o.textContent);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}()),q=H;c(35),c(36);var z=function(e){var t=e.src,c=e.show,a=e.onClose,r=Object(n.useRef)(null),s=function(e){"function"===typeof a&&a(e)},o=function e(t){t.stopPropagation(),r.current===t.target&&(s(t),window.removeEventListener("click",e))};return Object(n.useEffect)((function(){c&&window.addEventListener("click",o)})),Object(b.jsxs)("div",{ref:r,className:"image-modal",style:{display:c?"block":"none"},children:[Object(b.jsx)("img",{src:t,className:"content",alt:""}),Object(b.jsx)("div",{className:"footer",children:Object(b.jsxs)("a",{href:"javascript:void(0);",className:"closebtn",onClick:s,children:["Close ",Object(b.jsx)("span",{className:"close-icon",children:"\xd7"})]})})]})};var J=function(e){var t=e.src,c=e.srcAsync,a=Object(n.useState)("loading"),r=Object(i.a)(a,2),s=r[0],o=r[1],l=Object(n.useState)(t||null),d=Object(i.a)(l,2),j=d[0],u=d[1],O=Object(n.useState)(!1),p=Object(i.a)(O,2),h=p[0],f=p[1];return Object(n.useEffect)((function(){var e=function(){var e=Object(B.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!==typeof c){e.next=13;break}return e.prev=1,o("loading"),e.next=5,c();case 5:t=e.sent,u(t),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),o("error");case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();e()}),[c]),Object(n.useEffect)((function(){t&&(o("loading"),u(t))}),[t]),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{class:"image-placeholder",style:{display:"loading"===s?"flex":"none"},children:Object(b.jsx)("div",{class:"spinner-border text-secondary",role:"status",children:Object(b.jsx)("span",{class:"visually-hidden",children:"Loading..."})})}),Object(b.jsx)("div",{class:"image-placeholder",style:{display:"error"===s?"flex":"none"},children:Object(b.jsx)("span",{children:"Resource Unavailable"})}),Object(b.jsx)("img",{alt:"",src:j,onLoad:function(){o("success")},onError:function(){o("error")},onClick:function(){f(!0)},width:"100%",className:"zoom-hover",style:{display:"success"===s?"flex":"none"}}),Object(b.jsx)(z,{src:j,show:h,onClose:function(){f(!1)}})]})};var W=function(e){var t=e.ra,c=e.dec,n="https://checker-melted-forsythia.glitch.me/img?ra=".concat(t,"&dec=").concat(c),a="https://www.legacysurvey.org/viewer/cutout.jpg?ra=".concat(t,"&dec=").concat(c,"&layer=dr8&pixscale=0.55");return Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{class:"section-title",children:"S-PLUS 12 bands RGB"}),Object(b.jsx)(J,{src:n}),Object(b.jsx)("div",{class:"section-title",children:"Legacy Survey RGB"}),Object(b.jsx)(J,{src:a})]})};var Q=function(e){var t=e.ra,c=e.dec,a="https://splus-spectra.herokuapp.com/plot?ra=".concat(t,"&dec=").concat(c,"&all"),r=Object(n.useCallback)(Object(B.a)(D.a.mark((function e(){var n,a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new q,e.next=3,n.getSpecId({ra:t,dec:c});case 3:if(!(a=e.sent)){e.next=8;break}return e.abrupt("return","https://skyserver.sdss.org/dr16/en/get/SpecById.ashx?id=".concat(a));case 8:throw new Error("undefined specId");case 9:case"end":return e.stop()}}),e)}))),[t,c]);return Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{className:"section-title",children:"S-PLUS PhotoSpectra"}),Object(b.jsx)(J,{src:a}),Object(b.jsx)("div",{className:"section-title",children:"SDSS Spectra"}),Object(b.jsx)(J,{srcAsync:r})]})};function X(e,t,c,n){return Object(b.jsx)("div",{style:{display:n?"block":"none"},children:Object(b.jsx)(e,{ra:t,dec:c})})}var Y=function(){var e=Object(n.useState)("0"),t=Object(i.a)(e,2),c=t[0],a=t[1],r=g(),s=Object(i.a)(r,1)[0].objectInfo,o=s.ra,l=s.dec;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:"mb-3 row",children:[Object(b.jsx)("label",{for:"nav-tab-selector",className:"col-sm-3 col-form-label",children:"Category"}),Object(b.jsx)("div",{className:"col-sm-9",children:Object(b.jsxs)("select",{id:"nav-tab-selector",className:"form-select","aria-label":"Category",value:c,onChange:function(e){a(e.target.value)},children:[Object(b.jsx)("option",{value:"0",children:"Spectra"}),Object(b.jsx)("option",{value:"1",children:"RGB Images"}),Object(b.jsx)("option",{value:"2",children:"Catalog"})]})})]}),Object(b.jsxs)("div",{id:"nav-tab-content",className:"tabs",children:[X(Q,o,l,"0"===c),X(W,o,l,"1"===c)]})]})};var Z=function(){var e=g(),t=Object(i.a)(e,2),c=t[0],n=t[1],a=c.objectInfo.open?"400px":"0px";return Object(b.jsx)("div",{className:"object-info",style:{width:a},children:Object(b.jsxs)("div",{className:"m-2",children:[Object(b.jsxs)("div",{className:"d-flex justify-content-between align-items-center header",children:[Object(b.jsx)("span",{className:"d-block",children:"Object Info"}),Object(b.jsx)("button",{className:"closebtn d-block",onClick:function(e){n({type:f.CLOSE})},children:"\xd7"})]}),Object(b.jsx)(Y,{})]})})};var K=function(){return Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)(_,{}),Object(b.jsx)(Z,{})]})};s.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(m,{children:Object(b.jsx)(o.a,{children:Object(b.jsx)(K,{})})})}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.c1b0dab0.chunk.js.map